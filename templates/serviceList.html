{% extends "base.html" %}

{% block head %}
    <title>ServiceList</title>
    <link rel="icon" type="image/x-icon" href="/static/ico/icoDOWN.png">
{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto mt-10">
    <div class="overflow-x-auto rounded-lg shadow-lg">
        <table class="w-full border-collapse bg-white text-left text-sm text-gray-700">
            <!-- Table Head -->
            <thead class="bg-gray-100 text-gray-900 text-base">
                <tr>
                    <th class="px-6 py-4 font-semibold">{{ _("Service") }}</th>
                    <th class="px-6 py-4 font-semibold">{{ _("URL") }}</th>
                    <th class="px-6 py-4 font-semibold">{{ _("Reported Status by Users") }}</th>
                    <th class="px-6 py-4 font-semibold">{{ _("Status") }}</th>
                </tr>
            </thead>

            <!-- Table Body -->
            <tbody class="divide-y divide-gray-200">
                {% for serviceInfo in servicesInfo %}
                <tr class="hover:bg-gray-50 transition">
                    <!-- Service Name -->
                    <td class="px-6 py-4 font-medium text-gray-900">
                        {{ serviceInfo["service"].name }}
                    </td>

                    <!-- URL -->
                    <td class="px-6 py-4">
                        <a href="{{ serviceInfo['service'].url }}" 
                           class="text-blue-600 hover:underline">
                           {{ serviceInfo["service"].url }}
                        </a>
                    </td>

                    <!-- Reported Status -->
                    <td class="px-6 py-4">
                        {% if serviceInfo["service"].is_up_user %}
                            <span class="inline-block px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700">
                                {{ serviceInfo["service"].is_up_user }}
                            </span>
                        {% elif serviceInfo["reportedStatus"] == False %}
                            <span class="inline-block px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700">
                                {{ serviceInfo["service"].is_up_user }}
                            </span>
                        {% else %}
                            <span class="inline-block px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-700">
                                {{ serviceInfo["service"].is_up_user }}
                            </span>
                        {% endif %}
                    </td>

                    <!-- Live Status -->
                    <td class="px-6 py-4">
                        {% if serviceInfo["service"].status %}
                            <a href="/{{ serviceInfo['service'].name }}"
                               class="inline-block px-3 py-1 rounded-lg bg-green-500 text-white font-semibold hover:bg-green-600 transition">
                                {{ _("Up") }}
                            </a>
                        {% else %}
                            <a href="/{{ serviceInfo['service'].name }}"
                               class="inline-block px-3 py-1 rounded-lg bg-red-500 text-white font-semibold hover:bg-red-600 transition">
                                {{ _("Down") }}
                            </a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
